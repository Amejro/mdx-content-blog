{
  "title": "Building a QR code micro-app",
  "subtitle": "Build a serverless 'hello-world' QR code app with Python and AWS.",
  "date": "2021-08-14T00:00:00.000Z",
  "body": {
    "raw": "\r\n- [What is a QR Code?](#what-is-a-qr-code)\r\n- [Architecture](#architecture)\r\n  - [Overall Stack](#overall-stack)\r\n- [Implementation](#implementation)\r\n  - [Generating a `tag` and a URL](#generating-a-tag-and-a-url)\r\n  - [Generating the QR code image](#generating-the-qr-code-image)\r\n  - [Showing the QR image to the user](#showing-the-qr-image-to-the-user)\r\n  - [Persisting the `tag` and the message](#persisting-the-tag-and-the-message)\r\n  - [Scanning the QR image to load the content](#scanning-the-qr-image-to-load-the-content)\r\n- [Wrap Up](#wrap-up)\r\n\r\nEver since the pandemic started, I've noticed QR codes creeping into my daily life. Venue check-ins, digital menus at restaurants, and online payments.\r\n\r\nI thought it'd be fun to explore the technology a little bit, so I've built a micro web-app that lets you save messages and view them later using a QR code. Sort of a \"Hello World\" QR code project.\r\n\r\nIn this post, I'll be sharing how I built this using Python and AWS free tier.\r\n\r\nYou can try out the [app itself here](https://qr.pixegami.com/). The [source code](https://github.com/pixegami/qr-code-webapp) is also available on GitHub.\r\n\r\n![images/qr-code-demo.gif](https://cdn.hashnode.com/res/hashnode/image/upload/v1628899108564/NGWiGc3-w.gif)\r\n\r\n## What is a QR Code?\r\n\r\nWe've all seen and used them before, but how does a QR code actually work? The first thing to understand is that it is an [internationally standardized specification](https://www.iso.org/obp/ui/#iso:std:iso-iec:18004:ed-3:v1:en):\r\n\r\n> This International Standard [...] specifies the QR Code symbology characteristics, data character encoding methods, symbol formats, dimensional characteristics, error correction rules [...]\r\n\r\nAs long an image respects these standard, it is a \"QR code\" and can be understood by most smartphone cameras. The image itself also has a kind of anatomy:\r\n\r\n![images/qr_code_anatomy.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1628900340423/NSYNLARYu.png)\r\n\r\nIt is quite interesting, but ultimately these were the three things I cared about:\r\n\r\n- We can store up to around 4000 alpha-numeric symbols in a standard sized QR code.\r\n- QR codes can have a \"URL\" format, which will prompt phones to open it up in a browser when scanned.\r\n- QR codes have error-correction capabilities, which allow it to remain function even if some parts of it is covered or removedâ€”_I did not know this!_\r\n\r\n## Architecture\r\n\r\nI want to make an app that lets me author some arbitrary content (in this case a short text message), have it persisted somewhere, and generate a QR code that loads the content when I scan it with the phone.\r\n\r\nSo after breaking these requirements into technical tasks, here is the strategy:\r\n\r\n- **Author some arbitrary content**: I'll use a static React front-end to let the user write their message.\r\n- **Persist the content**: I'll have a serverless API (using AWS Lambda and API Gateway) for the front-end to use. It will receive the message (a string) and put it into database for storage. I'll generate a unique ID and use this as the `tag` for the object.\r\n- **Generate a QR Code**: I'll first come up with a URL string I want to encode into the QR image (using the `tag` I made above). Then I'll find a Python library that lets me turn this URL string into a QR image. I'll make the image accessible to the user.\r\n- **Load the content**: Now I'll implement the URL endpoint that the QR code re-directs to. It will probably have the `tag` as a query parameter, so I'll just use that to look up the message in my table and send it back to the page.\r\n\r\n### Overall Stack\r\n\r\n- **Frontend**: React (Typescript)\r\n- **Backend**: Python code with AWS Lambda and API Gateway\r\n- **Database**: DynamoDB\r\n- **Image Storage**: Amazon S3\r\n\r\n## Implementation\r\n\r\nMost of the app's 'meaty' logic lives in the [`qr-code-infrastructure/compute/api`](https://github.com/pixegami/qr-code-webapp/tree/main/qr-code-infrastructure/compute/api) folder, as a bunch\r\nof Python functions.\r\n\r\n### Generating a `tag` and a URL\r\n\r\nWhen a user sends a message, it generates a random tag using `uuid4` (which I truncated to 12\r\ncharacters to keep it a bit shorter). A URL to view this message will then be used to create a QR code.\r\n\r\n```python\r\n\r\n# uuid is a built-in Python library to generate random IDs with, with low chance of collision.\r\nqr_id = uuid.uuid4().hex[:12]\r\nqr_tag = f\"qr-{qr_id}\"\r\n\r\n# We'll later have to implement this page so that it can load our message with the given tag.\r\ncontent = f\"https://qr.pixegami.com/view?tag={qr_tag}\"\r\n```\r\n\r\n### Generating the QR code image\r\n\r\nOne of the things I really love about Python is how there's a library for everything. I just typed in \"qr code\" into PyPI and found this [library](https://pypi.org/project/qrcode/), which took a minute to install and use.\r\n\r\nUsing the `qrcode` library, I create an image. It's a one-liner.\r\n\r\n```python\r\nqr_image = qrcode.make(content)\r\n```\r\n\r\nBut now we need to save this image somewhere. Since this function is running on AWS Lambda, we can't just [save it anywhere](https://aws.amazon.com/lambda/faqs/).\r\n\r\n> Each Lambda function receives 500MB of non-persistent disk space in its own /tmp directory.\r\n\r\nThis must be saved into `/tmp` folder on Lambda\r\nsince that is the only folder that is writable (hence why we need to pass down a `path`).\r\n\r\n```python\r\nimage_path = os.path.join(path, f\"{qr_tag}.png\")\r\nqr_image.save(image_path)\r\n```\r\n\r\n### Showing the QR image to the user\r\n\r\nNow in our Lambda runtime we have a `.png` file at `image_path`. We need to find a way to get it to the user. We'll do this by storing the image somewhere permanent, and then generate a URL for that image.\r\n\r\nLet's upload it to an [S3 bucket](https://aws.amazon.com/s3/?nc2=h_ql_prod_fs_s3).\r\n\r\n```python\r\nbucket_name = os.environ[\"IMAGE_BUCKET_NAME\"]\r\nkey = f\"{qr_result.tag}.png\"\r\ns3client = boto3.client(\"s3\")\r\ns3client.upload_file(qr_result.image_path, bucket_name, key)\r\n```\r\n\r\nI then create a [pre-signed URL](https://docs.aws.amazon.com/AmazonS3/latest/userguide/ShareObjectPreSignedURL.html) from the bucket so that I can tell the frontend where to load the\r\nQR code image from.\r\n\r\n> All objects by default are private. Only the object owner has permission to access these objects. However, the object owner can optionally share objects with others by creating a presigned URL, using their own security credentials, to grant time-limited permission to download the objects.\r\n\r\nIt expires in `3600` seconds, but that's fine because I don't need the image\r\nitself to be long lived.\r\n\r\n```python\r\npresigned_url = s3client.generate_presigned_url(\r\n    \"get_object\",\r\n    Params={\"Bucket\": bucket_name, \"Key\": key},\r\n    ExpiresIn=3600,\r\n)\r\n```\r\n\r\nThis URL is sent back to the front-end for display.\r\n\r\n![images/qr-code.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1628903696663/uU7ksdnrL.png)\r\n\r\n### Persisting the `tag` and the message\r\n\r\nFinally I need to write an entry into the [DynamoDB table](https://aws.amazon.com/dynamodb/) so that when a user scans a QR code, we can fetch the message later.\r\n\r\nThe only important thing to know about DynamoDB here is that it acts as a simple key-value store, and it is also serverless.\r\n\r\n```python\r\nitem = QrItem()\r\nitem.pk = qr_result.tag  # This is the UUID we generated above.\r\nitem.message = message  # This is the message body.\r\nself.database.put_item(item)\r\n```\r\n\r\n### Scanning the QR image to load the content\r\n\r\nOn the front-end, it's simple just a page for this URL we generated earlier `https://qr.pixegami.com/view?tag={qr_tag}` to look up the table value for the item with that `tag`.\r\n\r\nI [used](https://github.com/pixegami/qr-code-webapp/blob/main/qr-code-site/src/components/pages/ViewPage.tsx#L19) a [React `useEffect` hook](https://reactjs.org/docs/hooks-effect.html), which lets me make an API call once the page loads.\r\n\r\nI have another API on the back-end, which receives this `tag` and looks up the saved message. It then sends it back for the front-end to display.\r\n\r\n```python\r\nserialized_item = self.database.get_item(QrItem(tag))\r\nitem = QrItem().deserialize(serialized_item)\r\nmessage = item.message\r\n```\r\n\r\n![images/qr-result.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1628903629263/V2Jg0j8r3.png)\r\n\r\n## Wrap Up\r\n\r\nThat's pretty much it! Now if I ever need to use QR codes as part of an application in the future I'll just dig this up ðŸ˜…\r\n\r\nAnd if you're keen to try this out yourself, feel free to check out the [source](https://github.com/pixegami/qr-code-webapp). It's a small project so you can probably build it out in a few hours (or a few days, if you're new to AWS as well).\r\n",
    "code": "var Component=(()=>{var sn=Object.create;var I=Object.defineProperty;var mn=Object.getOwnPropertyDescriptor;var an=Object.getOwnPropertyNames;var un=Object.getPrototypeOf,bn=Object.prototype.hasOwnProperty;var $=(m,n)=>()=>(n||m((n={exports:{}}).exports,n),n.exports),fn=(m,n)=>{for(var _ in n)I(m,_,{get:n[_],enumerable:!0})},ye=(m,n,_,N)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let g of an(n))!bn.call(m,g)&&g!==_&&I(m,g,{get:()=>n[g],enumerable:!(N=mn(n,g))||N.enumerable});return m};var hn=(m,n,_)=>(_=m!=null?sn(un(m)):{},ye(n||!m||!m.__esModule?I(_,\"default\",{value:m,enumerable:!0}):_,m)),_n=m=>ye(I({},\"__esModule\",{value:!0}),m);var ke=$((vn,ve)=>{ve.exports=React});var je=$(B=>{\"use strict\";(function(){\"use strict\";var m=ke(),n=Symbol.for(\"react.element\"),_=Symbol.for(\"react.portal\"),N=Symbol.for(\"react.fragment\"),g=Symbol.for(\"react.strict_mode\"),G=Symbol.for(\"react.profiler\"),z=Symbol.for(\"react.provider\"),H=Symbol.for(\"react.context\"),D=Symbol.for(\"react.forward_ref\"),S=Symbol.for(\"react.suspense\"),P=Symbol.for(\"react.suspense_list\"),U=Symbol.for(\"react.memo\"),O=Symbol.for(\"react.lazy\"),Ue=Symbol.for(\"react.offscreen\"),X=Symbol.iterator,Ke=\"@@iterator\";function we(e){if(e===null||typeof e!=\"object\")return null;var r=X&&e[X]||e[Ke];return typeof r==\"function\"?r:null}var v=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function b(e){{for(var r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];Re(\"error\",e,o)}}function Re(e,r,o){{var c=v.ReactDebugCurrentFrame,l=c.getStackAddendum();l!==\"\"&&(r+=\"%s\",o=o.concat([l]));var s=o.map(function(d){return String(d)});s.unshift(\"Warning: \"+r),Function.prototype.apply.call(console[e],console,s)}}var Ee=!1,Te=!1,Ie=!1,Se=!1,Pe=!1,J;J=Symbol.for(\"react.module.reference\");function Oe(e){return!!(typeof e==\"string\"||typeof e==\"function\"||e===N||e===G||Pe||e===g||e===S||e===P||Se||e===Ue||Ee||Te||Ie||typeof e==\"object\"&&e!==null&&(e.$$typeof===O||e.$$typeof===U||e.$$typeof===z||e.$$typeof===H||e.$$typeof===D||e.$$typeof===J||e.getModuleId!==void 0))}function qe(e,r,o){var c=e.displayName;if(c)return c;var l=r.displayName||r.name||\"\";return l!==\"\"?o+\"(\"+l+\")\":o}function Z(e){return e.displayName||\"Context\"}function p(e){if(e==null)return null;if(typeof e.tag==\"number\"&&b(\"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"),typeof e==\"function\")return e.displayName||e.name||null;if(typeof e==\"string\")return e;switch(e){case N:return\"Fragment\";case _:return\"Portal\";case G:return\"Profiler\";case g:return\"StrictMode\";case S:return\"Suspense\";case P:return\"SuspenseList\"}if(typeof e==\"object\")switch(e.$$typeof){case H:var r=e;return Z(r)+\".Consumer\";case z:var o=e;return Z(o._context)+\".Provider\";case D:return qe(e,e.render,\"ForwardRef\");case U:var c=e.displayName||null;return c!==null?c:p(e.type)||\"Memo\";case O:{var l=e,s=l._payload,d=l._init;try{return p(d(s))}catch{return null}}}return null}var y=Object.assign,C=0,ee,ne,te,re,oe,ce,ie;function de(){}de.__reactDisabledLog=!0;function Le(){{if(C===0){ee=console.log,ne=console.info,te=console.warn,re=console.error,oe=console.group,ce=console.groupCollapsed,ie=console.groupEnd;var e={configurable:!0,enumerable:!0,value:de,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}C++}}function We(){{if(C--,C===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:y({},e,{value:ee}),info:y({},e,{value:ne}),warn:y({},e,{value:te}),error:y({},e,{value:re}),group:y({},e,{value:oe}),groupCollapsed:y({},e,{value:ce}),groupEnd:y({},e,{value:ie})})}C<0&&b(\"disabledDepth fell below zero. This is a bug in React. Please file an issue.\")}}var q=v.ReactCurrentDispatcher,L;function K(e,r,o){{if(L===void 0)try{throw Error()}catch(l){var c=l.stack.trim().match(/\\n( *(at )?)/);L=c&&c[1]||\"\"}return`\n`+L+e}}var W=!1,w;{var Fe=typeof WeakMap==\"function\"?WeakMap:Map;w=new Fe}function le(e,r){if(!e||W)return\"\";{var o=w.get(e);if(o!==void 0)return o}var c;W=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var s;s=q.current,q.current=null,Le();try{if(r){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(d,[])}catch(x){c=x}Reflect.construct(e,[],d)}else{try{d.call()}catch(x){c=x}e.call(d.prototype)}}else{try{throw Error()}catch(x){c=x}e()}}catch(x){if(x&&c&&typeof x.stack==\"string\"){for(var i=x.stack.split(`\n`),f=c.stack.split(`\n`),a=i.length-1,u=f.length-1;a>=1&&u>=0&&i[a]!==f[u];)u--;for(;a>=1&&u>=0;a--,u--)if(i[a]!==f[u]){if(a!==1||u!==1)do if(a--,u--,u<0||i[a]!==f[u]){var h=`\n`+i[a].replace(\" at new \",\" at \");return e.displayName&&h.includes(\"<anonymous>\")&&(h=h.replace(\"<anonymous>\",e.displayName)),typeof e==\"function\"&&w.set(e,h),h}while(a>=1&&u>=0);break}}}finally{W=!1,q.current=s,We(),Error.prepareStackTrace=l}var j=e?e.displayName||e.name:\"\",Ne=j?K(j):\"\";return typeof e==\"function\"&&w.set(e,Ne),Ne}function Qe(e,r,o){return le(e,!1)}function Ye(e){var r=e.prototype;return!!(r&&r.isReactComponent)}function R(e,r,o){if(e==null)return\"\";if(typeof e==\"function\")return le(e,Ye(e));if(typeof e==\"string\")return K(e);switch(e){case S:return K(\"Suspense\");case P:return K(\"SuspenseList\")}if(typeof e==\"object\")switch(e.$$typeof){case D:return Qe(e.render);case U:return R(e.type,r,o);case O:{var c=e,l=c._payload,s=c._init;try{return R(s(l),r,o)}catch{}}}return\"\"}var E=Object.prototype.hasOwnProperty,se={},me=v.ReactDebugCurrentFrame;function T(e){if(e){var r=e._owner,o=R(e.type,e._source,r?r.type:null);me.setExtraStackFrame(o)}else me.setExtraStackFrame(null)}function Me(e,r,o,c,l){{var s=Function.call.bind(E);for(var d in e)if(s(e,d)){var i=void 0;try{if(typeof e[d]!=\"function\"){var f=Error((c||\"React class\")+\": \"+o+\" type `\"+d+\"` is invalid; it must be a function, usually from the `prop-types` package, but received `\"+typeof e[d]+\"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.\");throw f.name=\"Invariant Violation\",f}i=e[d](r,d,c,o,null,\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\")}catch(a){i=a}i&&!(i instanceof Error)&&(T(l),b(\"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).\",c||\"React class\",o,d,typeof i),T(null)),i instanceof Error&&!(i.message in se)&&(se[i.message]=!0,T(l),b(\"Failed %s type: %s\",o,i.message),T(null))}}}var Ve=Array.isArray;function F(e){return Ve(e)}function $e(e){{var r=typeof Symbol==\"function\"&&Symbol.toStringTag,o=r&&e[Symbol.toStringTag]||e.constructor.name||\"Object\";return o}}function Be(e){try{return ae(e),!1}catch{return!0}}function ae(e){return\"\"+e}function ue(e){if(Be(e))return b(\"The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.\",$e(e)),ae(e)}var A=v.ReactCurrentOwner,Ge={key:!0,ref:!0,__self:!0,__source:!0},be,fe,Q;Q={};function ze(e){if(E.call(e,\"ref\")){var r=Object.getOwnPropertyDescriptor(e,\"ref\").get;if(r&&r.isReactWarning)return!1}return e.ref!==void 0}function He(e){if(E.call(e,\"key\")){var r=Object.getOwnPropertyDescriptor(e,\"key\").get;if(r&&r.isReactWarning)return!1}return e.key!==void 0}function Xe(e,r){if(typeof e.ref==\"string\"&&A.current&&r&&A.current.stateNode!==r){var o=p(A.current.type);Q[o]||(b('Component \"%s\" contains the string ref \"%s\". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',p(A.current.type),e.ref),Q[o]=!0)}}function Je(e,r){{var o=function(){be||(be=!0,b(\"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",r))};o.isReactWarning=!0,Object.defineProperty(e,\"key\",{get:o,configurable:!0})}}function Ze(e,r){{var o=function(){fe||(fe=!0,b(\"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",r))};o.isReactWarning=!0,Object.defineProperty(e,\"ref\",{get:o,configurable:!0})}}var en=function(e,r,o,c,l,s,d){var i={$$typeof:n,type:e,key:r,ref:o,props:d,_owner:s};return i._store={},Object.defineProperty(i._store,\"validated\",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(i,\"_self\",{configurable:!1,enumerable:!1,writable:!1,value:c}),Object.defineProperty(i,\"_source\",{configurable:!1,enumerable:!1,writable:!1,value:l}),Object.freeze&&(Object.freeze(i.props),Object.freeze(i)),i};function nn(e,r,o,c,l){{var s,d={},i=null,f=null;o!==void 0&&(ue(o),i=\"\"+o),He(r)&&(ue(r.key),i=\"\"+r.key),ze(r)&&(f=r.ref,Xe(r,l));for(s in r)E.call(r,s)&&!Ge.hasOwnProperty(s)&&(d[s]=r[s]);if(e&&e.defaultProps){var a=e.defaultProps;for(s in a)d[s]===void 0&&(d[s]=a[s])}if(i||f){var u=typeof e==\"function\"?e.displayName||e.name||\"Unknown\":e;i&&Je(d,u),f&&Ze(d,u)}return en(e,i,f,l,c,A.current,d)}}var Y=v.ReactCurrentOwner,he=v.ReactDebugCurrentFrame;function k(e){if(e){var r=e._owner,o=R(e.type,e._source,r?r.type:null);he.setExtraStackFrame(o)}else he.setExtraStackFrame(null)}var M;M=!1;function V(e){return typeof e==\"object\"&&e!==null&&e.$$typeof===n}function _e(){{if(Y.current){var e=p(Y.current.type);if(e)return`\n\nCheck the render method of \\``+e+\"`.\"}return\"\"}}function tn(e){{if(e!==void 0){var r=e.fileName.replace(/^.*[\\\\\\/]/,\"\"),o=e.lineNumber;return`\n\nCheck your code at `+r+\":\"+o+\".\"}return\"\"}}var pe={};function rn(e){{var r=_e();if(!r){var o=typeof e==\"string\"?e:e.displayName||e.name;o&&(r=`\n\nCheck the top-level render call using <`+o+\">.\")}return r}}function xe(e,r){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var o=rn(r);if(pe[o])return;pe[o]=!0;var c=\"\";e&&e._owner&&e._owner!==Y.current&&(c=\" It was passed a child from \"+p(e._owner.type)+\".\"),k(e),b('Each child in a list should have a unique \"key\" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',o,c),k(null)}}function ge(e,r){{if(typeof e!=\"object\")return;if(F(e))for(var o=0;o<e.length;o++){var c=e[o];V(c)&&xe(c,r)}else if(V(e))e._store&&(e._store.validated=!0);else if(e){var l=we(e);if(typeof l==\"function\"&&l!==e.entries)for(var s=l.call(e),d;!(d=s.next()).done;)V(d.value)&&xe(d.value,r)}}}function on(e){{var r=e.type;if(r==null||typeof r==\"string\")return;var o;if(typeof r==\"function\")o=r.propTypes;else if(typeof r==\"object\"&&(r.$$typeof===D||r.$$typeof===U))o=r.propTypes;else return;if(o){var c=p(r);Me(o,e.props,\"prop\",c,e)}else if(r.PropTypes!==void 0&&!M){M=!0;var l=p(r);b(\"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?\",l||\"Unknown\")}typeof r.getDefaultProps==\"function\"&&!r.getDefaultProps.isReactClassApproved&&b(\"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.\")}}function cn(e){{for(var r=Object.keys(e.props),o=0;o<r.length;o++){var c=r[o];if(c!==\"children\"&&c!==\"key\"){k(e),b(\"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.\",c),k(null);break}}e.ref!==null&&(k(e),b(\"Invalid attribute `ref` supplied to `React.Fragment`.\"),k(null))}}function dn(e,r,o,c,l,s){{var d=Oe(e);if(!d){var i=\"\";(e===void 0||typeof e==\"object\"&&e!==null&&Object.keys(e).length===0)&&(i+=\" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\");var f=tn(l);f?i+=f:i+=_e();var a;e===null?a=\"null\":F(e)?a=\"array\":e!==void 0&&e.$$typeof===n?(a=\"<\"+(p(e.type)||\"Unknown\")+\" />\",i=\" Did you accidentally export a JSX literal instead of a component?\"):a=typeof e,b(\"React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s\",a,i)}var u=nn(e,r,o,l,s);if(u==null)return u;if(d){var h=r.children;if(h!==void 0)if(c)if(F(h)){for(var j=0;j<h.length;j++)ge(h[j],e);Object.freeze&&Object.freeze(h)}else b(\"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\");else ge(h,e)}return e===N?cn(u):on(u),u}}var ln=dn;B.Fragment=N,B.jsxDEV=ln})()});var Ae=$((jn,Ce)=>{\"use strict\";Ce.exports=je()});var Nn={};fn(Nn,{default:()=>gn,frontmatter:()=>pn});var t=hn(Ae()),pn={title:\"Building a QR code micro-app\",subtitle:\"Build a serverless 'hello-world' QR code app with Python and AWS.\",date:\"2021-08-14\"};function De(m){let n=Object.assign({ul:\"ul\",li:\"li\",a:\"a\",code:\"code\",p:\"p\",img:\"img\",h2:\"h2\",blockquote:\"blockquote\",em:\"em\",strong:\"strong\",h3:\"h3\",pre:\"pre\"},m.components);return(0,t.jsxDEV)(t.Fragment,{children:[(0,t.jsxDEV)(n.ul,{children:[`\n`,(0,t.jsxDEV)(n.li,{children:(0,t.jsxDEV)(n.a,{href:\"#what-is-a-qr-code\",children:\"What is a QR Code?\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:7,columnNumber:3},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:7,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:[(0,t.jsxDEV)(n.a,{href:\"#architecture\",children:\"Architecture\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:8,columnNumber:3},this),`\n`,(0,t.jsxDEV)(n.ul,{children:[`\n`,(0,t.jsxDEV)(n.li,{children:(0,t.jsxDEV)(n.a,{href:\"#overall-stack\",children:\"Overall Stack\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:9,columnNumber:5},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:9,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:9,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:8,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:[(0,t.jsxDEV)(n.a,{href:\"#implementation\",children:\"Implementation\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:10,columnNumber:3},this),`\n`,(0,t.jsxDEV)(n.ul,{children:[`\n`,(0,t.jsxDEV)(n.li,{children:(0,t.jsxDEV)(n.a,{href:\"#generating-a-tag-and-a-url\",children:[\"Generating a \",(0,t.jsxDEV)(n.code,{children:\"tag\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:11,columnNumber:19},this),\" and a URL\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:11,columnNumber:5},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:11,columnNumber:3},this),`\n`,(0,t.jsxDEV)(n.li,{children:(0,t.jsxDEV)(n.a,{href:\"#generating-the-qr-code-image\",children:\"Generating the QR code image\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:12,columnNumber:5},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:12,columnNumber:3},this),`\n`,(0,t.jsxDEV)(n.li,{children:(0,t.jsxDEV)(n.a,{href:\"#showing-the-qr-image-to-the-user\",children:\"Showing the QR image to the user\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:13,columnNumber:5},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:13,columnNumber:3},this),`\n`,(0,t.jsxDEV)(n.li,{children:(0,t.jsxDEV)(n.a,{href:\"#persisting-the-tag-and-the-message\",children:[\"Persisting the \",(0,t.jsxDEV)(n.code,{children:\"tag\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:14,columnNumber:21},this),\" and the message\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:14,columnNumber:5},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:14,columnNumber:3},this),`\n`,(0,t.jsxDEV)(n.li,{children:(0,t.jsxDEV)(n.a,{href:\"#scanning-the-qr-image-to-load-the-content\",children:\"Scanning the QR image to load the content\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:15,columnNumber:5},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:15,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:11,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:10,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:(0,t.jsxDEV)(n.a,{href:\"#wrap-up\",children:\"Wrap Up\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:16,columnNumber:3},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:16,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:7,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Ever since the pandemic started, I've noticed QR codes creeping into my daily life. Venue check-ins, digital menus at restaurants, and online payments.\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:18,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:`I thought it'd be fun to explore the technology a little bit, so I've built a micro web-app that lets you save messages and view them later using a QR code. Sort of a \"Hello World\" QR code project.`},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:20,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"In this post, I'll be sharing how I built this using Python and AWS free tier.\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:22,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"You can try out the \",(0,t.jsxDEV)(n.a,{href:\"https://qr.pixegami.com/\",children:\"app itself here\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:24,columnNumber:21},this),\". The \",(0,t.jsxDEV)(n.a,{href:\"https://github.com/pixegami/qr-code-webapp\",children:\"source code\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:24,columnNumber:70},this),\" is also available on GitHub.\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:24,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:(0,t.jsxDEV)(n.img,{src:\"https://cdn.hashnode.com/res/hashnode/image/upload/v1628899108564/NGWiGc3-w.gif\",alt:\"images/qr-code-demo.gif\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:26,columnNumber:1},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:26,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h2,{children:\"What is a QR Code?\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:28,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"We've all seen and used them before, but how does a QR code actually work? The first thing to understand is that it is an \",(0,t.jsxDEV)(n.a,{href:\"https://www.iso.org/obp/ui/#iso:std:iso-iec:18004:ed-3:v1:en\",children:\"internationally standardized specification\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:30,columnNumber:123},this),\":\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:30,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.blockquote,{children:[`\n`,(0,t.jsxDEV)(n.p,{children:\"This International Standard [...] specifies the QR Code symbology characteristics, data character encoding methods, symbol formats, dimensional characteristics, error correction rules [...]\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:32,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:32,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:'As long an image respects these standard, it is a \"QR code\" and can be understood by most smartphone cameras. The image itself also has a kind of anatomy:'},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:34,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:(0,t.jsxDEV)(n.img,{src:\"https://cdn.hashnode.com/res/hashnode/image/upload/v1628900340423/NSYNLARYu.png\",alt:\"images/qr_code_anatomy.png\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:36,columnNumber:1},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:36,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"It is quite interesting, but ultimately these were the three things I cared about:\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:38,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.ul,{children:[`\n`,(0,t.jsxDEV)(n.li,{children:\"We can store up to around 4000 alpha-numeric symbols in a standard sized QR code.\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:40,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:'QR codes can have a \"URL\" format, which will prompt phones to open it up in a browser when scanned.'},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:41,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:[\"QR codes have error-correction capabilities, which allow it to remain function even if some parts of it is covered or removed\\u2014\",(0,t.jsxDEV)(n.em,{children:\"I did not know this!\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:42,columnNumber:129},this)]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:42,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:40,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h2,{children:\"Architecture\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:44,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"I want to make an app that lets me author some arbitrary content (in this case a short text message), have it persisted somewhere, and generate a QR code that loads the content when I scan it with the phone.\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:46,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"So after breaking these requirements into technical tasks, here is the strategy:\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:48,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.ul,{children:[`\n`,(0,t.jsxDEV)(n.li,{children:[(0,t.jsxDEV)(n.strong,{children:\"Author some arbitrary content\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:50,columnNumber:3},this),\": I'll use a static React front-end to let the user write their message.\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:50,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:[(0,t.jsxDEV)(n.strong,{children:\"Persist the content\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:51,columnNumber:3},this),\": I'll have a serverless API (using AWS Lambda and API Gateway) for the front-end to use. It will receive the message (a string) and put it into database for storage. I'll generate a unique ID and use this as the \",(0,t.jsxDEV)(n.code,{children:\"tag\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:51,columnNumber:239},this),\" for the object.\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:51,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:[(0,t.jsxDEV)(n.strong,{children:\"Generate a QR Code\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:52,columnNumber:3},this),\": I'll first come up with a URL string I want to encode into the QR image (using the \",(0,t.jsxDEV)(n.code,{children:\"tag\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:52,columnNumber:110},this),\" I made above). Then I'll find a Python library that lets me turn this URL string into a QR image. I'll make the image accessible to the user.\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:52,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:[(0,t.jsxDEV)(n.strong,{children:\"Load the content\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:53,columnNumber:3},this),\": Now I'll implement the URL endpoint that the QR code re-directs to. It will probably have the \",(0,t.jsxDEV)(n.code,{children:\"tag\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:53,columnNumber:119},this),\" as a query parameter, so I'll just use that to look up the message in my table and send it back to the page.\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:53,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:50,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Overall Stack\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:55,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.ul,{children:[`\n`,(0,t.jsxDEV)(n.li,{children:[(0,t.jsxDEV)(n.strong,{children:\"Frontend\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:57,columnNumber:3},this),\": React (Typescript)\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:57,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:[(0,t.jsxDEV)(n.strong,{children:\"Backend\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:58,columnNumber:3},this),\": Python code with AWS Lambda and API Gateway\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:58,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:[(0,t.jsxDEV)(n.strong,{children:\"Database\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:59,columnNumber:3},this),\": DynamoDB\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:59,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:[(0,t.jsxDEV)(n.strong,{children:\"Image Storage\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:60,columnNumber:3},this),\": Amazon S3\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:60,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:57,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h2,{children:\"Implementation\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:62,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Most of the app's 'meaty' logic lives in the \",(0,t.jsxDEV)(n.a,{href:\"https://github.com/pixegami/qr-code-webapp/tree/main/qr-code-infrastructure/compute/api\",children:(0,t.jsxDEV)(n.code,{children:\"qr-code-infrastructure/compute/api\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:64,columnNumber:47},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:64,columnNumber:46},this),` folder, as a bunch\\r\nof Python functions.`]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:64,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:[\"Generating a \",(0,t.jsxDEV)(n.code,{children:\"tag\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:67,columnNumber:18},this),\" and a URL\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:67,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"When a user sends a message, it generates a random tag using \",(0,t.jsxDEV)(n.code,{children:\"uuid4\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:69,columnNumber:62},this),` (which I truncated to 12\\r\ncharacters to keep it a bit shorter). A URL to view this message will then be used to create a QR code.`]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:69,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-python\",children:`\\r\n# uuid is a built-in Python library to generate random IDs with, with low chance of collision.\\r\nqr_id = uuid.uuid4().hex[:12]\\r\nqr_tag = f\"qr-{qr_id}\"\\r\n\\r\n# We'll later have to implement this page so that it can load our message with the given tag.\\r\ncontent = f\"https://qr.pixegami.com/view?tag={qr_tag}\"\n`},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:72,columnNumber:1},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:72,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Generating the QR code image\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:82,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[`One of the things I really love about Python is how there's a library for everything. I just typed in \"qr code\" into PyPI and found this `,(0,t.jsxDEV)(n.a,{href:\"https://pypi.org/project/qrcode/\",children:\"library\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:84,columnNumber:138},this),\", which took a minute to install and use.\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:84,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Using the \",(0,t.jsxDEV)(n.code,{children:\"qrcode\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:86,columnNumber:11},this),\" library, I create an image. It's a one-liner.\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:86,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-python\",children:`qr_image = qrcode.make(content)\n`},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:88,columnNumber:1},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:88,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"But now we need to save this image somewhere. Since this function is running on AWS Lambda, we can't just \",(0,t.jsxDEV)(n.a,{href:\"https://aws.amazon.com/lambda/faqs/\",children:\"save it anywhere\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:92,columnNumber:107},this),\".\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:92,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.blockquote,{children:[`\n`,(0,t.jsxDEV)(n.p,{children:\"Each Lambda function receives 500MB of non-persistent disk space in its own /tmp directory.\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:94,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:94,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"This must be saved into \",(0,t.jsxDEV)(n.code,{children:\"/tmp\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:96,columnNumber:25},this),` folder on Lambda\\r\nsince that is the only folder that is writable (hence why we need to pass down a `,(0,t.jsxDEV)(n.code,{children:\"path\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:97,columnNumber:82},this),\").\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:96,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-python\",children:`image_path = os.path.join(path, f\"{qr_tag}.png\")\\r\nqr_image.save(image_path)\n`},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:99,columnNumber:1},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:99,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Showing the QR image to the user\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:104,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Now in our Lambda runtime we have a \",(0,t.jsxDEV)(n.code,{children:\".png\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:106,columnNumber:37},this),\" file at \",(0,t.jsxDEV)(n.code,{children:\"image_path\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:106,columnNumber:52},this),\". We need to find a way to get it to the user. We'll do this by storing the image somewhere permanent, and then generate a URL for that image.\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:106,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Let's upload it to an \",(0,t.jsxDEV)(n.a,{href:\"https://aws.amazon.com/s3/?nc2=h_ql_prod_fs_s3\",children:\"S3 bucket\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:108,columnNumber:23},this),\".\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:108,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-python\",children:`bucket_name = os.environ[\"IMAGE_BUCKET_NAME\"]\\r\nkey = f\"{qr_result.tag}.png\"\\r\ns3client = boto3.client(\"s3\")\\r\ns3client.upload_file(qr_result.image_path, bucket_name, key)\n`},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:110,columnNumber:1},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:110,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"I then create a \",(0,t.jsxDEV)(n.a,{href:\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/ShareObjectPreSignedURL.html\",children:\"pre-signed URL\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:117,columnNumber:17},this),` from the bucket so that I can tell the frontend where to load the\\r\nQR code image from.`]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:117,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.blockquote,{children:[`\n`,(0,t.jsxDEV)(n.p,{children:\"All objects by default are private. Only the object owner has permission to access these objects. However, the object owner can optionally share objects with others by creating a presigned URL, using their own security credentials, to grant time-limited permission to download the objects.\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:120,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:120,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"It expires in \",(0,t.jsxDEV)(n.code,{children:\"3600\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:122,columnNumber:15},this),` seconds, but that's fine because I don't need the image\\r\nitself to be long lived.`]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:122,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-python\",children:`presigned_url = s3client.generate_presigned_url(\\r\n    \"get_object\",\\r\n    Params={\"Bucket\": bucket_name, \"Key\": key},\\r\n    ExpiresIn=3600,\\r\n)\n`},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:125,columnNumber:1},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:125,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"This URL is sent back to the front-end for display.\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:133,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:(0,t.jsxDEV)(n.img,{src:\"https://cdn.hashnode.com/res/hashnode/image/upload/v1628903696663/uU7ksdnrL.png\",alt:\"images/qr-code.png\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:135,columnNumber:1},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:135,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:[\"Persisting the \",(0,t.jsxDEV)(n.code,{children:\"tag\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:137,columnNumber:20},this),\" and the message\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:137,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Finally I need to write an entry into the \",(0,t.jsxDEV)(n.a,{href:\"https://aws.amazon.com/dynamodb/\",children:\"DynamoDB table\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:139,columnNumber:43},this),\" so that when a user scans a QR code, we can fetch the message later.\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:139,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"The only important thing to know about DynamoDB here is that it acts as a simple key-value store, and it is also serverless.\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:141,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-python\",children:`item = QrItem()\\r\nitem.pk = qr_result.tag  # This is the UUID we generated above.\\r\nitem.message = message  # This is the message body.\\r\nself.database.put_item(item)\n`},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:143,columnNumber:1},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:143,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Scanning the QR image to load the content\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:150,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"On the front-end, it's simple just a page for this URL we generated earlier \",(0,t.jsxDEV)(n.code,{children:\"https://qr.pixegami.com/view?tag={qr_tag}\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:152,columnNumber:77},this),\" to look up the table value for the item with that \",(0,t.jsxDEV)(n.code,{children:\"tag\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:152,columnNumber:171},this),\".\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:152,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"I \",(0,t.jsxDEV)(n.a,{href:\"https://github.com/pixegami/qr-code-webapp/blob/main/qr-code-site/src/components/pages/ViewPage.tsx#L19\",children:\"used\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:154,columnNumber:3},this),\" a \",(0,t.jsxDEV)(n.a,{href:\"https://reactjs.org/docs/hooks-effect.html\",children:[\"React \",(0,t.jsxDEV)(n.code,{children:\"useEffect\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:154,columnNumber:124},this),\" hook\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:154,columnNumber:117},this),\", which lets me make an API call once the page loads.\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:154,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"I have another API on the back-end, which receives this \",(0,t.jsxDEV)(n.code,{children:\"tag\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:156,columnNumber:57},this),\" and looks up the saved message. It then sends it back for the front-end to display.\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:156,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-python\",children:`serialized_item = self.database.get_item(QrItem(tag))\\r\nitem = QrItem().deserialize(serialized_item)\\r\nmessage = item.message\n`},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:158,columnNumber:1},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:158,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:(0,t.jsxDEV)(n.img,{src:\"https://cdn.hashnode.com/res/hashnode/image/upload/v1628903629263/V2Jg0j8r3.png\",alt:\"images/qr-result.png\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:164,columnNumber:1},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:164,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h2,{children:\"Wrap Up\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:166,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"That's pretty much it! Now if I ever need to use QR codes as part of an application in the future I'll just dig this up \\u{1F605}\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:168,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"And if you're keen to try this out yourself, feel free to check out the \",(0,t.jsxDEV)(n.a,{href:\"https://github.com/pixegami/qr-code-webapp\",children:\"source\"},void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:170,columnNumber:73},this),\". It's a small project so you can probably build it out in a few hours (or a few days, if you're new to AWS as well).\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:170,columnNumber:1},this)]},void 0,!0,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\",lineNumber:1,columnNumber:1},this)}function xn(m={}){let{wrapper:n}=m.components||{};return n?(0,t.jsxDEV)(n,Object.assign({},m,{children:(0,t.jsxDEV)(De,m,void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\"},this)}),void 0,!1,{fileName:\"C:\\\\Users\\\\Kofi Amejro\\\\Desktop\\\\mdx-content-blog\\\\content\\\\_mdx_bundler_entry_point-c7b24065-6dbc-4671-9530-dfcc2c1b0d63.mdx\"},this):De(m)}var gn=xn;return _n(Nn);})();\n/*! Bundled license information:\n\nreact/cjs/react-jsx-dev-runtime.development.js:\n  (**\n   * @license React\n   * react-jsx-dev-runtime.development.js\n   *\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n*/\n;return Component;"
  },
  "_id": "qrcode.md",
  "_raw": {
    "sourceFilePath": "qrcode.md",
    "sourceFileName": "qrcode.md",
    "sourceFileDir": ".",
    "contentType": "markdown",
    "flattenedPath": "qrcode"
  },
  "type": "Post",
  "slug": "qrcode",
  "url": "/blog/qrcode",
  "image": "/qrcode.jpg"
}